name: "Validate Package Addition Simple"

on:
  pull_request_target:
    types: [opened, synchronize, reopened, labeled]
    branches:
      - main

jobs:
  validate-package-addition:
    name: Validate Package Addition PR
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write
      checks: write

    steps:
      - name: Check for Package Addition Label
        id: check-label
        run: |
          echo "ðŸ” Checking PR labels..."
          LABEL_JSON='${{ toJSON(github.event.pull_request.labels) }}'
          echo "Labels JSON: $LABEL_JSON"
          if echo "$LABEL_JSON" | jq -e '.[] | select(.name == "package-addition")' > /dev/null 2>&1; then
            echo "âœ… Found package-addition label"
            echo "has_label=true" >> $GITHUB_OUTPUT
          else
            echo "âŒ No package-addition label found"
            echo "has_label=false" >> $GITHUB_OUTPUT
          fi

      - name: Test Output
        if: steps.check-label.outputs.has_label == 'true'
        run: |
          echo "âœ… Validation workflow is working!"
          echo "PR number: ${{ github.event.pull_request.number }}"